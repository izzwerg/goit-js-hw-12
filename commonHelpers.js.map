{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nform.addEventListener('submit', imageSearch);\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst API_KEY = '11329962-6436ba51ddb58bb96deed169a';\nlet pageNumber;\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nasync function imageSearch(e) {\n  pageNumber = 1;\n  e.preventDefault();\n  gallery.innerHTML = '';\n  loader.classList.add('is-visible');\n\n  const form = e.currentTarget;\n  const searchTerm = form.elements.searchTerm.value;\n\n  try {\n    const images = await getImages(searchTerm);\n\n    if (images.totalHits === 0) {\n      noFoundMessage();\n    } else {\n      let markup = '';\n      for (const image of images.hits) {\n        markup += createMarkup(image);\n      }\n      loader.classList.remove('is-visible');\n      gallery.insertAdjacentHTML('beforeend', markup);\n      const lightbox = new SimpleLightbox('.gallery a');\n      lightbox.refresh();\n    }\n  } catch (error){\n    console.log(error);\n  } finally {\n    form.reset();\n  }\n}\n\nasync function getImages(searchTerm) {\n  const urlParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchTerm,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 40,\n    page: pageNumber,\n  });\n\n  const response = await axios.get(`/?${urlParams}`);\n  return response.data;\n}\n\nfunction createMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"gallery-details\">\n            <div class=\"detail\"><img class=\"gallery-logo\" src=\"like.png\" /> <p class=\"gallery-text\">${likes}</p></div>\n            <div class=\"detail\"><img class=\"gallery-logo\" src=\"viev.png\" /> <p class=\"gallery-text\">${views}</p></div>\n            <div class=\"detail\"><img class=\"gallery-logo\" src=\"comment.png\" /> <p class=\"gallery-text\">${comments}</p></div>\n            <div class=\"detail\"><img class=\"gallery-logo\" src=\"download.png\" /> <p class=\"gallery-text\">${downloads}</p></div>\n        </div>\n    </li>`;\n}\n\nfunction noFoundMessage() {\n  iziToast.show({\n    position: 'topRight',\n    messageColor: 'white',\n    iconUrl: 'error.svg',\n    iconColor: 'white',\n    color: '#EF4040',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n  loader.classList.remove('is-visible');\n}\n"],"names":["form","imageSearch","gallery","loader","API_KEY","pageNumber","axios","e","searchTerm","images","getImages","noFoundMessage","markup","image","createMarkup","SimpleLightbox","error","urlParams","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iziToast"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,iBAAiB,SAAUC,CAAW,EAC3C,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,qCAChB,IAAIC,EAEJC,EAAM,SAAS,QAAU,0BAEzB,eAAeL,EAAYM,EAAG,CAC5BF,EAAa,EACbE,EAAE,eAAc,EAChBL,EAAQ,UAAY,GACpBC,EAAO,UAAU,IAAI,YAAY,EAEjC,MAAMH,EAAOO,EAAE,cACTC,EAAaR,EAAK,SAAS,WAAW,MAE5C,GAAI,CACF,MAAMS,EAAS,MAAMC,EAAUF,CAAU,EAEzC,GAAIC,EAAO,YAAc,EACvBE,QACK,CACL,IAAIC,EAAS,GACb,UAAWC,KAASJ,EAAO,KACzBG,GAAUE,EAAaD,CAAK,EAE9BV,EAAO,UAAU,OAAO,YAAY,EACpCD,EAAQ,mBAAmB,YAAaU,CAAM,EAC7B,IAAIG,EAAe,YAAY,EACvC,QAAO,CACjB,CACF,OAAQC,EAAM,CACb,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRhB,EAAK,MAAK,CACX,CACH,CAEA,eAAeU,EAAUF,EAAY,CACnC,MAAMS,EAAY,IAAI,gBAAgB,CACpC,IAAKb,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAMH,CACV,CAAG,EAGD,OADiB,MAAMC,EAAM,IAAI,KAAKW,CAAS,EAAE,GACjC,IAClB,CAEA,SAASH,EAAa,CACpB,aAAAI,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,wCAC+BL,CAAa;AAAA,8CACPD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,sGAG8BC,CAAK;AAAA,sGACLC,CAAK;AAAA,yGACFC,CAAQ;AAAA,0GACPC,CAAS;AAAA;AAAA,UAGnH,CAEA,SAASb,GAAiB,CACxBc,EAAS,KAAK,CACZ,SAAU,WACV,aAAc,QACd,QAAS,YACT,UAAW,QACX,MAAO,UACP,QACE,0EACN,CAAG,EACDtB,EAAO,UAAU,OAAO,YAAY,CACtC"}